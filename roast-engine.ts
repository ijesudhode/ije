// ============================================
// IJe Roast Engine - Progressive Roasts üî•
// ============================================

export interface RoastSession {
    errorCounts: Map<string, number>;  // Track error types
    totalErrors: number;
    successStreak: number;
    roastLevel: number;  // 1-5
}

// ==========================================
// PROGRESSIVE ROASTS (Level 1-5)
// ==========================================

const ROASTS: Record<string, string[][]> = {
    // UNDEFINED_VARIABLE
    'undefined_var': [
        // Level 1 - Gentle
        ["‡πÄ‡∏≠‡πä‡∏∞! ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ô‡∏∞", "‡∏•‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ‡∏ô‡∏∞"],
        // Level 2 - Mild
        ["‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á! ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏¥", "‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ú‡∏¥‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤? ü§î"],
        // Level 3 - Spicy
        ["‡∏°‡∏∂‡∏á‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏î‡πâ‡πÑ‡∏á!", "‡∏™‡∏°‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô? ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô!"],
        // Level 4 - Hot
        ["‡πÇ‡∏≠‡πâ‡πÇ‡∏´! ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏•‡∏≠‡∏¢‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡πÑ‡∏´‡∏ô? ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏¥!", "‡∏°‡∏∂‡∏á‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏≠‡πà‡∏≤‡∏ô‡πÉ‡∏à‡πÑ‡∏î‡πâ‡πÄ‡∏´‡∏£‡∏≠? üò§"],
        // Level 5 - Nuclear
        ["‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏õ.1 ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏ñ‡∏≠‡∏∞! ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ï‡πâ‡∏≠‡∏á ao ‡∏Å‡πà‡∏≠‡∏ô!", "IQ ‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà? ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÑ‡∏°‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÑ‡∏á! üî•"]
    ],

    // TYPE_ERROR
    'type_error': [
        ["‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏ô‡∏∞", "‡∏•‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ"],
        ["‡πÄ‡∏Æ‡πâ‡∏¢! ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏¥‡∏î! lek ‡∏Å‡∏±‡∏ö kum ‡∏°‡∏±‡∏ô‡∏Ñ‡∏ô‡∏•‡∏∞‡∏≠‡∏¢‡πà‡∏≤‡∏á", "‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà‡∏ô‡∏∞"],
        ["‡∏°‡∏∂‡∏á‡∏™‡πà‡∏á kum ‡πÑ‡∏õ‡πÉ‡∏´‡πâ lek ‡πÑ‡∏î‡πâ‡πÑ‡∏á!", "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏±‡∏ö‡∏™‡∏ô‡∏à‡∏±‡∏á‡πÄ‡∏•‡∏¢! üòµ"],
        ["‡πÇ‡∏≠‡πâ‡∏ß! ‡πÄ‡∏≠‡∏≤‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•‡πÑ‡∏õ‡∏ö‡∏ß‡∏Å‡∏Å‡∏±‡∏ö‡∏™‡πâ‡∏°‡πÄ‡∏´‡∏£‡∏≠!", "‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏°‡∏±‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô! ‡πÉ‡∏ä‡πâ‡∏´‡∏±‡∏ß‡∏Ñ‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢!"],
        ["‡∏Å‡∏£‡∏µ‡πä‡∏î! ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏¥‡∏î‡∏≠‡∏µ‡∏Å‡πÅ‡∏•‡πâ‡∏ß! ‡∏°‡∏∂‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏°‡∏≤! ü§Ø", "IQ ‡∏ï‡∏¥‡∏î‡∏•‡∏ö‡πÄ‡∏´‡∏£‡∏≠? lek ‡∏Å‡∏±‡∏ö kum ‡∏°‡∏±‡∏ô‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô!"]
    ],

    // SYNTAX_ERROR
    'syntax_error': [
        ["‡πÑ‡∏ß‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏ú‡∏¥‡∏î‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢", "‡∏•‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ"],
        ["‡πÄ‡∏≠‡πä‡∏∞! ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ú‡∏¥‡∏î syntax ‡πÅ‡∏•‡πâ‡∏ß", "‡∏î‡∏π error message ‡∏î‡∏µ‡πÜ ‡∏ô‡∏∞"],
        ["Syntax ‡∏ú‡∏¥‡∏î! ‡∏≠‡πà‡∏≤‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ö‡πâ‡∏≤‡∏á‡∏™‡∏¥!", "‡∏°‡∏∑‡∏≠‡πÑ‡∏°‡πâ‡πÑ‡∏õ‡πÑ‡∏´‡∏ô‡∏°‡∏≤ ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ú‡∏¥‡∏î‡πÄ‡∏û‡∏µ‡∏¢‡∏ö!"],
        ["‡πÇ‡∏Ñ‡πâ‡∏î‡∏°‡∏±‡πà‡∏ß‡∏ã‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏´‡∏°‡∏î! ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏≠‡∏á‡∏°‡∏∂‡∏á!", "‡∏•‡∏∑‡∏°‡∏õ‡∏¥‡∏î‡∏ß‡∏á‡πÄ‡∏•‡πá‡∏ö ‡∏•‡∏∑‡∏° job ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏ß‡∏∞!"],
        ["‡∏ô‡∏µ‡πà‡∏°‡∏±‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå‡∏ï‡πà‡∏≤‡∏á‡∏î‡∏≤‡∏ß! üëΩ", "‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô IJe 101 ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏•‡∏¢! Syntax ‡∏û‡∏±‡∏á‡∏´‡∏°‡∏î!"]
    ],

    // NOT_A_FUNCTION
    'not_function': [
        ["‡∏ô‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏∞", "‡∏•‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á kian ‡∏Å‡πà‡∏≠‡∏ô"],
        ["‡πÄ‡∏Æ‡πâ‡∏¢! ‡∏°‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô!", "kian ‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÑ‡∏î‡πâ"],
        ["‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà! ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏î‡∏¥!", "‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô? ‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô kian ‡πÄ‡∏•‡∏¢!"],
        ["‡πÇ‡∏ó‡∏£‡∏´‡∏≤‡πÉ‡∏Ñ‡∏£? ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡πÇ‡∏•‡∏Å!", "‡∏™‡∏°‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô? ‡∏ï‡πâ‡∏≠‡∏á kian ‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÑ‡∏î‡πâ!"],
        ["‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏´‡∏•‡∏≠‡∏ô! ‡∏°‡∏∂‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ú‡∏µ‡πÄ‡∏´‡∏£‡∏≠! üëª", "IQ ‡∏ï‡πà‡∏≥‡∏°‡∏≤‡∏Å! ‡πÑ‡∏°‡πà‡∏°‡∏µ kian ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÑ‡∏î‡πâ‡πÑ‡∏á!"]
    ],

    // INFINITE_LOOP
    'infinite_loop': [
        ["‡∏£‡∏∞‡∏ß‡∏±‡∏á! ‡∏•‡∏π‡∏õ‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏à‡∏ö‡∏ô‡∏∞", "‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ"],
        ["‡∏•‡∏π‡∏õ‡∏ô‡∏µ‡πâ‡∏î‡∏π‡πÑ‡∏°‡πà‡∏à‡∏ö‡πÄ‡∏•‡∏¢!", "loop ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏à‡∏∞‡∏•‡πà‡∏°!"],
        ["‡∏≠‡∏¥‡∏ô‡∏ü‡∏¥‡∏ô‡∏¥‡∏ï‡∏µ‡πâ‡∏•‡∏π‡∏õ! ‡∏°‡∏∂‡∏á‡∏à‡∏∞‡πÄ‡∏ú‡∏≤‡∏Ñ‡∏≠‡∏°‡πÄ‡∏´‡∏£‡∏≠!", "‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏´‡∏¢‡∏∏‡∏î‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏´‡∏ô???"],
        ["‡∏•‡∏π‡∏õ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ß‡∏±‡∏ô‡∏à‡∏ö! ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏∞‡∏Ñ‡πâ‡∏≤‡∏á‡∏ï‡∏•‡∏≠‡∏î‡∏Å‡∏≤‡∏•!", "‡∏°‡∏∂‡∏á‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ï‡∏≤‡∏¢‡πÄ‡∏´‡∏£‡∏≠!"],
        ["‡∏≠‡∏¥‡∏ô‡∏ü‡∏¥‡∏ô‡∏¥‡∏ï‡∏µ‡πâ‡∏•‡∏π‡∏õ‡∏à‡∏≤‡∏Å‡∏ô‡∏£‡∏Å! üî•üëπüî•", "‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÑ‡∏õ Elon Musk ‡∏Å‡πá‡πÄ‡∏≠‡∏≤‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà!"]
    ],

    // GENERIC
    'generic': [
        ["‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢", "‡∏•‡∏≠‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏î‡∏π‡∏ô‡∏∞"],
        ["‡πÄ‡∏≠‡πä‡∏∞! ‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢", "‡∏î‡∏π error ‡∏≠‡πà‡∏≤‡∏ô‡∏î‡∏µ ‡πÜ"],
        ["‡πÇ‡∏Ñ‡πâ‡∏î‡∏û‡∏±‡∏á‡πÅ‡∏•‡πâ‡∏ß! ‡πÅ‡∏Å‡πâ‡πÄ‡∏ñ‡∏≠‡∏∞!", "‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ ‡∏î‡∏π‡∏î‡∏µ‡πÜ!"],
        ["Error ‡∏≠‡∏µ‡∏Å‡πÅ‡∏•‡πâ‡∏ß! ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏¢‡∏±‡∏á‡πÑ‡∏á‡∏ß‡∏∞!", "‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡∏û‡∏•‡∏≤‡∏î‡∏ö‡πà‡∏≠‡∏¢‡∏à‡∏±‡∏á!"],
        ["‡∏ô‡∏µ‡πà‡∏°‡∏±‡∏ô‡∏´‡∏≤‡∏¢‡∏ô‡∏∞! ‡πÇ‡∏Ñ‡πâ‡∏î‡∏°‡∏∂‡∏á‡∏û‡∏±‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß! üí•", "‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ï‡πâ‡∏ô‡πÄ‡∏•‡∏¢!"]
    ]
};

// ==========================================
// SUCCESS COMPLIMENTS
// ==========================================

const COMPLIMENTS: string[][] = [
    // Low streak (1-2)
    ["‚úÖ ‡∏£‡∏±‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!", "‡∏î‡∏µ‡∏°‡∏≤‡∏Å! üëç"],
    // Medium streak (3-5)
    ["üéâ ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! ‡∏£‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡∏µ‡∏Å‡πÅ‡∏•‡πâ‡∏ß!", "‡πÇ‡∏Ñ‡πâ‡∏î‡∏™‡∏ß‡∏¢‡∏°‡∏≤‡∏Å! üí™", "‡∏õ‡∏£‡∏ö‡∏°‡∏∑‡∏≠! üëè"],
    // High streak (6-10)
    ["üî• Hot streak! ‡∏£‡∏±‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô!", "‡πÄ‡∏ó‡∏û‡∏°‡∏≤‡∏Å! ‡πÇ‡∏Ñ‡πâ‡∏î‡∏õ‡∏±‡∏á‡πÜ! üöÄ", "Pro coder ‡πÄ‡∏•‡∏¢! üèÜ"],
    // Legend streak (11+)
    ["üëë LEGENDARY! ‡∏°‡∏∂‡∏á‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏ó‡∏û IJe!", "üåü ‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î! ‡πÑ‡∏°‡πà‡∏°‡∏µ error ‡πÄ‡∏•‡∏¢!", "üíé Diamond coder! ‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡πÜ!"]
];

// ==========================================
// ROAST ENGINE CLASS
// ==========================================

export class RoastEngine {
    private session: RoastSession;

    constructor() {
        this.session = {
            errorCounts: new Map(),
            totalErrors: 0,
            successStreak: 0,
            roastLevel: 1
        };
    }

    // Get roast level based on repeated errors
    private calculateRoastLevel(errorType: string): number {
        const count = this.session.errorCounts.get(errorType) || 0;
        if (count <= 1) return 1;
        if (count <= 3) return 2;
        if (count <= 5) return 3;
        if (count <= 8) return 4;
        return 5;
    }

    // Get a roast message
    getRoast(errorType: string): { message: string; level: number } {
        // Track this error
        const currentCount = this.session.errorCounts.get(errorType) || 0;
        this.session.errorCounts.set(errorType, currentCount + 1);
        this.session.totalErrors++;
        this.session.successStreak = 0;

        // Calculate level
        const level = this.calculateRoastLevel(errorType);
        this.session.roastLevel = level;

        // Get roast messages for this type and level
        const typeRoasts = ROASTS[errorType] || ROASTS['generic'];
        const levelRoasts = typeRoasts[level - 1] || typeRoasts[0];

        // Pick random roast from level
        const message = levelRoasts[Math.floor(Math.random() * levelRoasts.length)];

        return { message, level };
    }

    // Get compliment on success
    getCompliment(): string {
        this.session.successStreak++;

        let tier: number;
        if (this.session.successStreak <= 2) tier = 0;
        else if (this.session.successStreak <= 5) tier = 1;
        else if (this.session.successStreak <= 10) tier = 2;
        else tier = 3;

        const compliments = COMPLIMENTS[tier];
        return compliments[Math.floor(Math.random() * compliments.length)];
    }

    // Get session stats
    getStats(): { totalErrors: number; successStreak: number; roastLevel: number } {
        return {
            totalErrors: this.session.totalErrors,
            successStreak: this.session.successStreak,
            roastLevel: this.session.roastLevel
        };
    }

    // Reset session
    reset(): void {
        this.session = {
            errorCounts: new Map(),
            totalErrors: 0,
            successStreak: 0,
            roastLevel: 1
        };
    }
}

// Global instance
export const roastEngine = new RoastEngine();
